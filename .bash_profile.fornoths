function __git_ps1_temp {
    local b="$(git symbolic-ref HEAD 2>/dev/null)";
    if [ -n "$b" ]; then
        printf " %s " "${b##refs/heads/}";
    fi
}

function vssh() {
  ssh dev.noths.com "cd /var/sites/noths/development && $*"
}

function ds() {
  ssh dev.noths.com "cd /var/sites/noths/development && script/deploy staging$1 $2"
}

function mds() {
  ssh dev.noths.com "cd /var/sites/noths/development &&
    script/deploy staging$1 $2 --migrate_without_maintenance_page"
}

function staging() {
  ssh staging$*
}

function timer_start {
  timer=${timer:-$SECONDS}
}
function timer_stop {
  timer_show=$(($SECONDS - $timer))
  unset timer
}
trap 'timer_start' DEBUG
PROMPT_COMMAND=timer_stop

export PS1="\[\e[1;30m\]\${timer_show}s\[\e[0m\]\n\[\e[30;42m\]iMac \W \[\e[30;43m\]\$(__git_ps1_temp)\[\e[0m\] "
export CLICOLOR=1
export JENKINS_USERNAME="INSERTCIUSERNAMEHEREPLEASE"
export JENKINS_PASSWORD="INSERTCIPASSWORDHEREPLEASE"
export EDITOR="nano"

alias ..='cd ..'
alias be='bundle exec'
alias ll='ls -al'
alias gs='git st'
alias gm='git co master'
alias gr='git pull --rebase origin master'
alias gdbs='git co -- db/schema.rb'
alias gdm='git diff -b | mate'
alias noths='cd ~/sites/noths/www/'
alias ttr='vssh touch tmp/restart.txt && echo done.'
alias dev='ssh dev.noths.com'
alias rs='bundle exec rspec'
alias vu='vagrant up'
alias vs='vagrant suspend'
alias vh='vagrant halt'
alias rlc='vssh rake less:compile'
alias plzsphinx='vssh rm log/searchd.development.pid && vssh bundle exec rake thinking_sphinx:start && echo Next time shut down properly.'
alias cacheclasses='touch config/environments/cache_classes && vssh touch tmp/restart.txt && echo Classes cached.'
alias uncacheclasses='rm config/environments/cache_classes && vssh touch tmp/restart.txt && echo Classes uncached.'

if [ -f `brew --prefix`/etc/bash_completion ]; then
    . `brew --prefix`/etc/bash_completion
fi

noths
